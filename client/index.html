<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>chatterbox</title>
    <link rel="stylesheet" href="styles/styles.css">

    <!-- dependencies -->
    <script src="bower_components/jquery/jquery.min.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <!-- your scripts -->
    <script src="scripts/config.js"></script>
    <script src="scripts/app.js"></script>
  </head>
  <body>
    <div id="main">
      <h1>chatterbox</h1>
      <input id="messageInput">Message here:</input>
      <div id="chats"> </div>
      <h1>Rooms</h1>
      <ul id="roomSelect"></ul>
    </div>
    <script>

      $('#chats').on('click', '.username', function(event){
        console.log('clicked username');
        console.log(this);
        console.log($(this));
        app.addFriend();
        event.preventDefault();
      });

      $('#roomSelect').on('click', 'button', function(e) {
        console.log($(this).text());
      });

      $("#messageInput").on('keyup', function(e){
        if(e.keyCode === 13){
          var windowData = window.location.search;

          var userName = windowData.slice(windowData.indexOf("=")+1);
          var messageText = $("#messageInput").val();
          $("#messageInput").val("");

          var message = {
            'username': userName,
            'text': messageText,
            'roomname': 'lobby'
          };

          app.send(message);
        }

      });


    </script>
  </body>
</html>
